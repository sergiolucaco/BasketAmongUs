// Creates the gservice factory. This will be the primary means by which we interact with Google Maps
angular.module('ServicesModule')
    .factory('DataService', function($http){

        //Contact with the JSON file generated by google map API.
        //Retrieve all the data in the current DB when a request in that endpoint happens.
    	function getAllCourts() {
    		return $http.get('/api/courts')
    						.then( d => d.data )
    	}
        // Send all the data inside the object "oCourt" ( generated with a form ) to the endpoint specified.
    	function addCourt( oCourt ) {
    		return $http.post('/api/courts', oCourt)	
    	}
        // Send all the data inside the object "oQuery" ( generated with a form ) to the endpoint specified 
        // and return only de data that matches with de query.
        function postQuery ( oQuery ) {
            return $http.post('/api/courts/filtered', oQuery)
                                .then( results => results.data)    	    
        }
        // By passing a id as a paremeter return the object which matches with the specified ID.
        function getCourtsDetails ( id ){
            const url = `/api/court/${id}`;
            return $http.get( url ).then( d => d.data )
            
        }
        return { getAllCourts, addCourt, postQuery , getCourtsDetails}
    })